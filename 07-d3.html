<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: </title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <h1 class="title"></h1>
          
<p>layout: page title: D3 subtitle: Finally... minutes: 20 ---</p>
<div id="learning-objectives" class="objectives panel panel-warning">
<div class="panel-heading">
<h2><span class="glyphicon glyphicon-certificate"></span>Learning Objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Reading in data from a given <code>.json</code> file</li>
<li>Creating a bubble plot</li>
<li>Knowing where to find the code for other plots</li>
</ul>
</div>
</div>
<ol style="list-style-type: decimal">
<li>create html page:</li>
</ol>
<pre class="sourceCode html"><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
  <span class="kw">&lt;head&gt;</span>
    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;title&gt;</span>The Wealth <span class="er">&amp;</span> Health of the N-Nations<span class="kw">&lt;/title&gt;</span>
    <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> type=</span><span class="st">&quot;text/css&quot;</span><span class="ot"> href=</span><span class="st">&quot;main.css&quot;</span> <span class="kw">/&gt;</span>
  <span class="kw">&lt;/head&gt;</span>
  <span class="kw">&lt;body&gt;</span>

    <span class="kw">&lt;h1&gt;</span>The Wealth <span class="er">&amp;</span> Health of the N-Nations<span class="kw">&lt;/h1&gt;</span>

    <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;chart&quot;</span><span class="kw">&gt;&lt;/p&gt;</span>

    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;http://d3js.org/d3.v3.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;main.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
  <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<p>talk about: 1) pointing to css file 2) pointing to d3 library 3) Javascript file that contains our actual code 4) we create a html element (paragraph) with the id <code>chart</code>. for now, this is a placeholder and will be filled in through javascript.</p>
<p>And now, let's write main.js.</p>
<p>D3 is a Javascript library. This means that we can use all of the Javascript commands that we have already learned, but on top of these, there are a few new functions that will make our life easier.</p>
<p>The main purpose of D3 is to create visualisations of data online. Because it uses Javascript, it is possible to make graphs interactive!</p>
<p>Similar to the syntax we've already seen (<code>JSON.stringify</code>), D3-specific functions can be called using a <code>d3.</code>-syntax.</p>
<p>Now we want to do is to read in the data that is stored in 'nations.json'.</p>
<pre class="d3"><code>d3.json(&quot;resources/nations.json&quot;, function(nations) { }</code></pre>
<ul>
<li><code>d3.json()</code> - function call. A function that reads in a json file and parses it.</li>
<li>&quot;resources/nations.json&quot; - first argument: what's the data we want to do this to?</li>
<li><code>function(nations){...}</code> - callback function (inline function and it doesn't have a name - only object space, because it doesn't have a name --&gt; we can't call it from anywhere else in our code)</li>
<li><code>nations</code> - as soon as the data is read, d3 assigns the name <code>nations</code> to the object it returns. we can only use 'nations' within this callback function ({..&lt;--everything that's in here knows what nations is--&gt;..})</li>
<li>This line doesn't return anything. that's often the case.</li>
</ul>
<p>The next step is to think about what we want to happen between the curly brackets. For now, we want to:</p>
<ul>
<li>Link Javascript to html page</li>
<li>Insert an svg canvas</li>
<li>Create axes (x: income per capita, y: life expectancy)</li>
<li>Display data points (scatter plot)</li>
</ul>
<pre class="js"><code>// Create the SVG container and set the origin.

var chart = d3.select(&quot;#chart&quot;);
var svg_canvas = chart.append(&quot;svg&quot;);</code></pre>
<p>d3.select is selecting the first element on the html page that has the id 'chart'. In the next step, we append the element by an svg canvas. This is equivalent to writing</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;chart&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;svg&gt;</span> <span class="kw">&lt;/svg&gt;</span> <span class="kw">&lt;/p&gt;</span></code></pre>
<p>in the html file. We chose to append because now we have access to the svg element without the need to select it by id again.</p>
<p>Let's set up the dimensions of the chart:</p>
<pre class="js"><code>// Chart dimensions.
var margin = {top: 19.5, right: 19.5, bottom: 19.5, left: 39.5};
var width = 960 - margin.right;
var height = 500 - margin.top - margin.bottom;</code></pre>
<ul>
<li>challenge: radius = population</li>
<li>tool tips: country names</li>
<li>challenge: colour code each contry in a different colour</li>
<li>transition: create time steps</li>
<li>D3 page: how do I get the plot I want?</li>
</ul>
        </div>
      </div>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
  </body>
</html>
